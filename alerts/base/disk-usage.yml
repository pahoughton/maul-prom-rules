# 2019-02-10 (cc) <paul4hough@gmail.com>
#
---
groups:
  - name: disk-usage
    rules:
      - alert: disk-usage-absent
        expr: absent(node_filesystem_free_bytes)
        annotations:
          title: node_filesystem_free_bytes absent in {{ $labels.job }}

      - alert: disk-usage
        expr: >-
          (node_filesystem_free_bytes * 100
          / node_filesystem_size_bytes)
          < 30
        annotations:
          title: >-
            disk {{ $labels.mountpoint }} < {{ $value }}
            free space on {{ $labels.instance }}
